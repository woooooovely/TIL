# Socket

# 소켓 통신

## 소켓(Socket)?

소켓은 프로세스가 드넓은 네트워크로 데이터를 내보내거나 혹은 그 네트워크로부터 데이터를 받기 위한 실제적인 창구 역할을 한다. 그러므로 프로세스가 데이터를 보내기 위해서 반드시 소켓을 열어서 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어야 한다.

<aside> 💡 소켓은 프로토콜, IP 주소, 포트 번호로 정의된다.

</aside>

다시말해 소켓은 **떨어져있는 두 호스트를 연결해주는 도구**로써 인터페이스의 역할을 하는데 데이터를 주고 받을 수 있는 구조체로 소켓을 통해 데이터 통로가 만들어진 다. 소켓은 역할에 따라 서버 소켓, 클라이언트 소켓으로 구분된다.

## 소켓 통신의 흐름

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d36b64ce-a32f-4942-aa2a-e2b1fb514cc6/Untitled.png)

### 서버(Server)

클라이언트 소켓의 연결 요청을 대기하고, 연결 요청이 오면 클라이언트 소켓을 생성해 통신을 가능하게 한다.

1. **socket() 함수로 소켓을 생성**
2. **bind() 함수로 ip와 port번호를 설정**
3. listen() 함수로 클라이언트의 접근 요청에 **수신 대기열을 만들어 몇 개의 클라이언트를 대기시킬지 결정**
4. **accept() 함수로 클라이언트와의 연결을 기다림**

### 클라이언트(Client)

실제로 데이터 송수신이 일어나는 것은 클라이언트 소켓

1. **socket() 함수로 가장 먼저 소켓을 연다**
2. **connect() 함수로 통신 할 서버의 설정된 ip와 port 번호에 통신 시도**
3. 통신 시도 시, **서버가 accpet() 함수로 클라이언트의 socket descriptor를 반환**
4. 이를 통해 **클라이언트와 서버가 서로 read(), write()를 하며 통신**

## HTTP 통신과 Socket 통신 비교

### HTTP 통신

클라이언트의 요청이 있을 때만 서버가 응답(response)하여 해당 정보를 전송하고 곧바로 연결을 종료하는 방식

## HTTP 통신 특징

- 클라이언트가 요청을 보내는 경우에만 서버가 응답하는 단방향 통신
- 서버로부터 응답을 받은 후엔 곧바로 연결을 종료
- 실시간 연결이 아닌, 필요한 경우에만 서버에 요청을 보내는 상황에 유용

## Socket 통신

서버와 클라이언트가 특정 port를 통해 양방향으로 통신

## Socket 통신 특징

- 서버와 클라이언트가 연결을 계속 유지하는 양방향 통신
- 서버와 클라이언트가 실시간으로 데이터를 주고 받는 상황이 필요할 때 사용